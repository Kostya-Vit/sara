<!DOCTYPE html>
<html lang="uk">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
		/>
		<title>Перегляд Трансляції</title>
		<link rel="stylesheet" href="css/client.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		/>
	</head>
	<body>
		<!-- Экран подключения -->
		<div id="connectScreen" class="connect-screen">
			<div class="connect-content">
				<div class="connect-icon">
					<i class="fas fa-video"></i>
				</div>
				<h1 class="connect-title">Перегляд трансляції</h1>
				<p style="color: #94a3b8; margin-bottom: 2rem">
					Введіть ID кімнати, щоб приєднатися до трансляції
				</p>

				<input
					type="text"
					id="roomIdInput"
					class="connect-input"
					placeholder="ID кімнати"
					maxlength="10"
				/>

				<button onclick="joinRoom()" class="connect-btn">
					<i class="fas fa-play"></i> Підключитися
				</button>

				<div id="connectStatus" class="status-message"></div>

				<div style="margin-top: 2rem; font-size: 0.9rem; color: #64748b">
					<i class="fas fa-info-circle"></i> Запитайте ID кімнати у хоста
				</div>
			</div>
		</div>

		<!-- Основной контент -->
		<div id="roomContent" class="main-content hidden">
			<!-- Видео секция -->
			<section class="video-section">
				<div class="video-container">
					<video id="remote-video" autoplay playsinline></video>

					<div id="videoPlaceholder" class="video-placeholder">
						<i class="fas fa-spinner fa-spin"></i>
						<h3>Очікування трансляції...</h3>
						<p>Хост скоро розпочне трансляцію</p>
					</div>

					<!-- Новые контролы в стиле таймлайна -->
					<div class="video-controls-overlay" id="videoControls">
						<div class="control-timeline" id="progressBar">
							<div class="control-progress" id="progress"></div>
						</div>
						<div class="control-buttons">
							<button
								id="audioBtn"
								class="control-btn active"
								title="Звук увімк./вимк."
							>
								<i class="fas fa-volume-up"></i>
							</button>
							<div class="control-time-display" id="timeDisplay">00:00</div>
							<div class="control-buttons-right">
								<button
									id="reconnectBtn"
									class="control-btn"
									title="Перепідключитися"
								>
									<i class="fas fa-redo"></i>
								</button>
								<button
									id="fullscreenBtn"
									class="control-btn"
									title="Повноекранний режим"
								>
									<i class="fas fa-expand"></i>
								</button>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- Чат секция -->
			<section class="chat-section" id="chatSection">
				<div class="chat-header">
					<h3><i class="fas fa-comments"></i> Чат трансляції</h3>
					<div class="online-count" id="onlineCount">1 онлайн</div>
				</div>

				<div class="chat-messages" id="messages">
					<div class="message system">
						<i class="fas fa-spinner fa-spin"></i> Підключення до чату...
					</div>
				</div>

				<div class="chat-input-area">
					<input
						type="text"
						id="chat-input"
						class="chat-input"
						placeholder="Напишіть повідомлення..."
						maxlength="500"
					/>
					<button onclick="sendMessage()" class="send-btn">
						<i class="fas fa-paper-plane"></i>
					</button>
				</div>
			</section>
		</div>

		<!-- Мини-чат в стиле GTA Online (будет поверх видео) -->
		<div id="miniChat" class="mini-chat">
			<div class="mini-chat-container">
				<div class="mini-chat-header">
					<h4><i class="fas fa-comments"></i> Чат трансляції</h4>
					<button class="mini-chat-close" id="miniChatClose">
						<i class="fas fa-times"></i>
					</button>
				</div>
				<div class="mini-chat-messages" id="miniChatMessages">
					<div class="mini-message system">
						<i class="fas fa-spinner fa-spin"></i> Підключення до чату...
					</div>
				</div>
				<div class="mini-chat-input-area">
					<input
						type="text"
						id="miniChatInput"
						class="mini-chat-input"
						placeholder="Напишіть повідомлення..."
						maxlength="200"
						autocomplete="off"
					/>
					<button onclick="sendMiniChatMessage()" class="mini-send-btn">
						<i class="fas fa-paper-plane"></i>
					</button>
				</div>
			</div>
		</div>

		<!-- Кнопка открытия мини-чата - ПРЯМО НА ВИДЕО -->
		<button id="miniChatToggleBtn" class="mini-chat-toggle-btn">
			<i class="fas fa-comment"></i>
			<span class="mini-unread-badge" id="miniUnreadBadge">0</span>
		</button>

		<script src="/socket.io/socket.io.js"></script>
		<script src="js/client.js"></script>
	</body>
</html>
